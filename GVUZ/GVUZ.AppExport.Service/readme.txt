Настройка службы экспорта

I. Конфигурация службы

В файле GVUZ.AppExport.Service.exe.config необходимо указать следующие настройки

1. Строка соединения с базой GVUZ 
В разделе connectionStrings нужно отредактировать строку соединения с name="AppExport" указав строку подключения к базе GVUZ

2. Настройка интервала опроса БД
Задается интервал опроса БД на предмет поступления новых запросов на экспорт заявлений.

Раздел applicationSettings/GVUZ.AppExport.Service.Properties.Settings
тэг setting с атрибутом name="AppExportDbPollInterval"
значение указывается внутри тэга value в формате чч:мм:сс (по-умолчанию 10 секунд - 00:00:10)

3. Настройка папки с результатами обработки запросов
Необходимо указать путь к папке, в которой должны содержаться результаты обработки (xml файлы)

Раздел applicationSettings/GVUZ.AppExport.Service.Properties.Settings
тэг setting с атрибутом name="AppExportFileStorage"
значение указывается внутри тэга value 
Если не задано, то будет использоваться папка FisAppExport в ApplicationData пользователя, от имени которого работает сервис.
Лучше указать явно.

4. Настройка количества потоков обработки
Указывается максимальное число одновременных потоков, обрабатывающих очередь запросов на экспорт заявлений.

Раздел applicationSettings/GVUZ.AppExport.Service.Properties.Settings
тэг setting с атрибутом name="AppExportThreadCount"
значение указывается внутри тэга value, по-умолчанию 1 поток
при изменении желательно указывать число кратное степени 2 (2, 4, 8 и т.д.)

II. Установка службы

Для установки службы необходимо запустить файл install.bat в папке Install\x64 или Install\x86 в зависимости от архитектуры сервера, на котором устаналивается служба.

Для переустановки ранее установленной службы используйте файл reinstall.bat

Для удаления службы используйте файл uninstall.bat

Имя службы в диспетчере служб Windows - "ФИС приема - служба экспорта"
Имя службы для работы из командной строки для запуска и остановки - gvuzappex 
(net start gvuzappex/net stop gvuzappex)

При установке службы также создается журнал событий Windows под названием "ФИС приема"
Для просмотра журнала откройте панель управления / администрирование / просмотр событий / журналы приложений и служб / ФИС приема.

III. Конфигурация web-приложения GVUZ
Необходимо внести некоторые настройки в web.config приложения, чтобы обеспечить возможность отправки и просмотра результатов выполнения запросов на экспорт.

1. Строка соединения с базой GVUZ 
В разделе connectionStrings нужно отредактировать строку соединения с name="AppExport" указав строку подключения к базе GVUZ

2. Настройка папки с результатами обработки запросов
Необходимо указать путь к папке, в которой содержаться результаты обработки запросов к сервису (для скачивания файлов из интерфейса приложения).
Значение должно быть тоже, что и указанное в конфигурации сервиса экспорта заявлений.

Раздел applicationSettings/GVUZ.AppExport.Service.Properties.Settings
тэг setting с атрибутом name="AppExportFileStorage"
значение указывается внутри тэга value 
Если не задано, то будет использоваться папка FisAppExport в ApplicationData пользователя, от имени которого работает web-приложение.
Лучше указать явно.